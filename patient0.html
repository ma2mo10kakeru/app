<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
    <title>patient0</title>
    <link rel="stylesheet" href="./css/system.css" />

<script type="text/javascript">
 $(function(){
    $.getJSON("drugdata.json",display);
　});
function display(drugdata){
    $("#p0_name").html(drugdata[0].name);
};
function pageback(){
    location.href="index.html";
}

$(function () {
	 $("#IDcheck_morning").click(function(){
					$.getJSON("drugdata.json", IDcheck1);
				});
});
function IDcheck1(drugdata){
	var ID1;
	ID1 = drugdata[0].id;
    if( document.form1.morning_statuscheck.value==ID1){
        Right = confirm("正しく確認できています。\n対象患者に薬剤を投与してください。");
                if(Right == true){
                    $("#status_morning").html("投与済みです");
                }else{
                    alert("キャンセルされました。");
                }
    }else{
        Wrong = confirm("対象患者が間違っています！\n患者IDを再確認してください。");
                if(Wrong == true){
                    location.href="qr.html";
                }else{
                    alert("キャンセルされました。")
                }
    }
}
$(function () {
	 $("#IDcheck_noon").click(function(){
					$.getJSON("drugdata.json", IDcheck2);
				});
});
function IDcheck2(drugdata){
	var ID2;
	ID2 = drugdata[0].id;
    if( document.form2.noon_statuscheck.value==ID2){
        Right = confirm("正しく確認できています。\n対象患者に薬剤を投与してください。");
                if(Right == true){
                    $("#status_noon").html("投与済みです");
                }else{
                    alert("キャンセルされました。");
                }
    }else{
        Wrong = confirm("対象患者が間違っています！\n患者IDを再確認してください。");
                if(Wrong == true){
                    location.href="qr.html";
                }else{
                    alert("キャンセルされました。")
                }
    }
}
$(function () {
	 $("#IDcheck_night").click(function(){
					$.getJSON("drugdata.json", IDcheck3);
				});
});
function IDcheck3(drugdata){
	var ID3;
	ID3 = drugdata[0].id;
    if( document.form3.night_statuscheck.value==ID3){
        Right = confirm("正しく確認できています。\n対象患者に薬剤を投与してください。");
                if(Right == true){
                    $("#status_night").html("投与済みです");
                }else{
                    alert("キャンセルされました。");
                }
    }else{
        Wrong = confirm("対象患者が間違っています！\n患者IDを再確認してください。");
                if(Wrong == true){
                    location.href="qr.html";
                }else{
                    alert("キャンセルされました。")
                }
    }
}
</script>
</head>

<body>
    <div class="container">
        <header>
            <p class="title">与薬情報システム</p>
        </header>
        
    <div class="main">
    <br>
    <table border="1" class="list">
        <caption>与薬情報</caption>
        <tr>
            <th colspan="2">氏名</th>
        </tr>
        <tr>
            <td colspan="2" id="p0_name"></td>
        </tr>
        <tr>
            <th>投与時間</th><th>ステータス</th>
        </tr>
        <tr>
            <td><a href="p0_morning.html" class="btn_home">朝食後</a></td><td id="status_morning">未投与</td>
        </tr>
        <tr>
            <td><a href="p0_noon.html" class="btn_home">昼食後</a></td><td id="status_noon">未投与</td>
        </tr>
        <tr>
            <td><a href="p0_night.html" class="btn_home">夕食後</a></td><td id="status_night">未投与</td>
        </tr>
    </table>
    <br>
    <table class="IDlist">
        <caption>QRコード認証</caption>
        <tr>
            <th colspan="2">朝食後</th>
        </tr>
        <tr>
            <td colspan="2"><a href="qr.html" class="btn_home">QRを読み取る</a></td>
        </tr>
        <tr>
            <form name="form1">
            <td><input type="text" id="morning_statuscheck" placeholder="IDを入力または貼り付けて下さい" inputmode="numeric" pattern="\d*"></td>
            <td><input type="button" value="IDを確認" id="IDcheck_morning"></td>
            </form>
        </tr>
        <tr>
            <th colspan="2">昼食後</th>
        </tr>
        <tr>
            <td colspan="2"><a href="qr.html" class="btn_home">QRを読み取る</a></td>
        </tr>
        <tr>
            <form name="form2">
            <td><input type="text" id="noon_statuscheck" placeholder="IDを入力または貼り付けて下さい" inputmode="numeric" pattern="\d*"></td>
            <td><input type="button" value="IDを確認" id="IDcheck_noon"></td>
            </form>
        </tr>
        <tr>
            <th colspan="2">夕食後</th>
        </tr>
        <tr>
            <td colspan="2"><a href="qr.html" class="btn_home">QRを読み取る</a></td>
        </tr>
        <tr>
            <form name="form3">
            <td><input type="text" id="night_statuscheck" placeholder="IDを入力または貼り付けて下さい" inputmode="numeric" pattern="\d*"></td>
            <td><input type="button" value="IDを確認" id="IDcheck_night"></td>
            </form>
        </tr>
    </table>
    </div>

    <footer>
        <a href="index.html" class="btn-stitch">もどる</a>
    </footer>

    </div>
</body>
</html>